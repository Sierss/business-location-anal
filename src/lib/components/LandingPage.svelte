<script lang="ts">
  import { onMount } from 'svelte';
  
  let { onStartAnalysis } = $props();
  
  let category = $state('');
  let city = $state('');
  let isLoading = $state(false);
  
  const categories = [
    '–ö–æ—Ñ–µ–π–Ω—è', '–†–µ—Å—Ç–æ—Ä–∞–Ω', '–Æ–≤–µ–ª–∏—Ä–Ω–∞—è –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è', '–°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã', 
    '–§–∏—Ç–Ω–µ—Å-–∫–ª—É–±', '–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è', '–ê–ø—Ç–µ–∫–∞', '–ú–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã',
    '–ê–≤—Ç–æ—Å–µ—Ä–≤–∏—Å', '–ü–µ–∫–∞—Ä–Ω—è', '–ë–∞—Ä–±–µ—Ä—à–æ–ø', '–î–µ—Ç—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä'
  ];
  
  const cities = [
    '–ú–æ—Å–∫–≤–∞', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥',
    '–ö–∞–∑–∞–Ω—å', '–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥', '–ß–µ–ª—è–±–∏–Ω—Å–∫', '–°–∞–º–∞—Ä–∞',
    '–û–º—Å–∫', '–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É', '–£—Ñ–∞', '–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫'
  ];
  
  function handleSubmit() {
    if (!category || !city) return;
    
    isLoading = true;
    
    setTimeout(() => {
      onStartAnalysis({ category, city });
      isLoading = false;
    }, 500);
  }
  
  let heroRef = $state();
  
  onMount(() => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-in');
        }
      });
    }, { threshold: 0.1 });
    
    document.querySelectorAll('.animate-on-scroll').forEach(el => {
      observer.observe(el);
    });
  });
</script>

<div class="relative overflow-hidden">
  <!-- Hero Section -->
  <section bind:this={heroRef} class="relative min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-card to-background">
    <!-- Animated background elements -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-secondary/10 rounded-full blur-3xl animate-float"></div>
      <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-float" style="animation-delay: -3s;"></div>
      <div class="absolute top-1/2 left-1/2 w-32 h-32 bg-primary/10 rounded-full blur-2xl animate-float" style="animation-delay: -1.5s;"></div>
    </div>
    
    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <div class="animate-on-scroll opacity-0 translate-y-8 transition-all duration-1000">
        <h1 class="text-5xl md:text-7xl font-serif font-bold text-foreground mb-6 text-balance">
          –ù–∞–π–¥–∏—Ç–µ <span class="bg-gradient-to-r from-secondary to-accent bg-clip-text text-transparent animate-gradient">–∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ</span> –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞
        </h1>
        
        <p class="text-xl md:text-2xl text-muted mb-12 max-w-3xl mx-auto text-pretty">
          –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ª–æ–∫–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞—Ö, –¥–µ–º–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ. 
          –ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–∫—Ç–æ–≤, –∞ –Ω–µ –¥–æ–≥–∞–¥–æ–∫.
        </p>
      </div>
      
      <!-- Search Form -->
      <div class="animate-on-scroll opacity-0 translate-y-8 transition-all duration-1000 delay-300">
        <div class="bg-card/80 backdrop-blur-sm rounded-2xl p-8 shadow-2xl border border-border max-w-2xl mx-auto animate-pulse-glow">
          <h3 class="text-2xl font-serif font-bold text-card-foreground mb-6">–ü–æ–ª—É—á–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ –∑–∞ 2 –º–∏–Ω—É—Ç—ã</h3>
          
          <div class="space-y-4">
            <div>
              <label for="category" class="block text-sm font-medium text-card-foreground mb-2">–¢–∏–ø –±–∏–∑–Ω–µ—Å–∞</label>
              <select id="category" bind:value={category} class="w-full px-4 py-3 bg-input border border-border rounded-lg focus:ring-2 focus:ring-ring focus:border-transparent transition-all">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                {#each categories as cat}
                  <option value={cat}>{cat}</option>
                {/each}
              </select>
            </div>
            
            <div>
              <label for="city" class="block text-sm font-medium text-card-foreground mb-2">–ì–æ—Ä–æ–¥</label>
              <select id="city" bind:value={city} class="w-full px-4 py-3 bg-input border border-border rounded-lg focus:ring-2 focus:ring-ring focus:border-transparent transition-all">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                {#each cities as c}
                  <option value={c}>{c}</option>
                {/each}
              </select>
            </div>
            
            <button 
              onclick={handleSubmit}
              disabled={!category || !city || isLoading}
              class="w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
            >
              {#if isLoading}
                <div class="flex items-center justify-center">
                  <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-primary-foreground mr-2"></div>
                  –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...
                </div>
              {:else}
                –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ª–æ–∫–∞—Ü–∏–∏
              {/if}
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Features Section -->
  <section class="py-24 bg-card/30">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16 animate-on-scroll opacity-0 translate-y-8 transition-all duration-1000">
        <h2 class="text-4xl md:text-5xl font-serif font-bold text-foreground mb-6">
          –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –≤ –æ—Ç—á–µ—Ç–µ
        </h2>
        <p class="text-xl text-muted max-w-3xl mx-auto">
          –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –æ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –±–∏–∑–Ω–µ—Å–∞
        </p>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {#each [
          {
            icon: 'üó∫Ô∏è',
            title: '–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤',
            description: '–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Å –ø–ª–æ—Ç–Ω–æ—Å—Ç—å—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –≤–∞—à–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –∏—Ö —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏'
          },
          {
            icon: 'üìä',
            title: '–ê–Ω–∞–ª–∏–∑ —Ä–∞–π–æ–Ω–æ–≤',
            description: '–î–µ–º–æ–≥—Ä–∞—Ñ–∏—è, —Å—Ä–µ–¥–Ω–∏–π –¥–æ—Ö–æ–¥ –∂–∏—Ç–µ–ª–µ–π, –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å'
          },
          {
            icon: 'üí∞',
            title: '–°—Ç–æ–∏–º–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã',
            description: '–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –∑–∞ –º¬≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–π –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –ø–æ –≤—Å–µ–º —É–ª–∏—Ü–∞–º –∏ —Ä–∞–π–æ–Ω–∞–º'
          },
          {
            icon: 'üöá',
            title: '–ë–ª–∏–∑–æ—Å—Ç—å –∫ –º–µ—Ç—Ä–æ',
            description: '–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Å—Ç–∞–Ω—Ü–∏–π –º–µ—Ç—Ä–æ –∏ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏–º–æ—Å—Ç—å –ª–æ–∫–∞—Ü–∏–∏'
          },
          {
            icon: '‚≠ê',
            title: '–†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã',
            description: '–ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤: –æ—Ü–µ–Ω–∫–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤, —Å–∏–ª—å–Ω—ã–µ –∏ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã'
          },
          {
            icon: 'üéØ',
            title: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏',
            description: '–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ —Å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–º —Å—Ç–æ–∏—Ç –æ—Ç–∫—Ä—ã—Ç—å –±–∏–∑–Ω–µ—Å'
          }
        ] as feature, index}
          <div class="animate-on-scroll opacity-0 translate-y-8 transition-all duration-1000 bg-card rounded-xl p-6 shadow-lg hover:shadow-xl transition-shadow border border-border" style="animation-delay: {index * 100}ms;">
            <div class="text-4xl mb-4">{feature.icon}</div>
            <h3 class="text-xl font-serif font-bold text-card-foreground mb-3">{feature.title}</h3>
            <p class="text-muted">{feature.description}</p>
          </div>
        {/each}
      </div>
    </div>
  </section>
  
  <!-- Social Proof Section -->
  <section class="py-24 bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-4xl md:text-5xl font-serif font-bold text-foreground mb-6">
          –ù–∞–º –¥–æ–≤–µ—Ä—è—é—Ç –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–∏
        </h2>
        <p class="text-xl text-muted">
          –ë–æ–ª–µ–µ 500 —É—Å–ø–µ—à–Ω—ã—Ö –±–∏–∑–Ω–µ—Å–æ–≤ –æ—Ç–∫—Ä—ã—Ç–æ —Å –Ω–∞—à–∏–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
        </p>
      </div>
      
      <div class="grid md:grid-cols-3 gap-8">
        {#each [
          {
            name: '–ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤',
            business: '–ö–æ—Ñ–µ–π–Ω—è "–£—Ç—Ä–æ"',
            text: '–ë–ª–∞–≥–æ–¥–∞—Ä—è –æ—Ç—á–µ—Ç—É –Ω–∞—à–µ–ª –∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –≤ —Ü–µ–Ω—Ç—Ä–µ. –û–∫—É–ø–∏–ª—Å—è –∑–∞ 14 –º–µ—Å—è—Ü–µ–≤!',
            result: '–í—ã—Ä—É—á–∫–∞ ‚ÇΩ2.8–ú –≤ –º–µ—Å—è—Ü'
          },
          {
            name: '–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞',
            business: '–°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã "–°—Ç–∏–ª—å"',
            text: '–ê–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ä–∞–π–æ–Ω–µ –º–∞–ª–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤. –°–µ–π—á–∞—Å —É –Ω–∞—Å –æ—á–µ—Ä–µ–¥—å –Ω–∞ –º–µ—Å—è—Ü –≤–ø–µ—Ä–µ–¥.',
            result: '150+ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤'
          },
          {
            name: '–î–º–∏—Ç—Ä–∏–π –ö–æ–∑–ª–æ–≤',
            business: '–§–∏—Ç–Ω–µ—Å-–∫–ª—É–± "–≠–Ω–µ—Ä–≥–∏—è"',
            text: '–û—Ç—á–µ—Ç –ø–æ–º–æ–≥ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏ —Å –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –ª–æ–∫–∞—Ü–∏–µ–π. –°—ç–∫–æ–Ω–æ–º–∏–ª –º–∏–Ω–∏–º—É–º ‚ÇΩ800,000.',
            result: '300+ —á–ª–µ–Ω–æ–≤ –∫–ª—É–±–∞'
          }
        ] as testimonial}
          <div class="bg-card rounded-xl p-6 shadow-lg border border-border">
            <div class="flex items-center mb-4">
              <div class="w-12 h-12 bg-accent rounded-full flex items-center justify-center text-accent-foreground font-bold">
                {testimonial.name.split(' ').map(n => n[0]).join('')}
              </div>
              <div class="ml-4">
                <div class="font-semibold text-foreground">{testimonial.name}</div>
                <div class="text-sm text-muted">{testimonial.business}</div>
              </div>
            </div>
            <p class="text-muted mb-4 italic">"{testimonial.text}"</p>
            <div class="text-sm font-medium text-accent">{testimonial.result}</div>
          </div>
        {/each}
      </div>
    </div>
  </section>
  
  <!-- Pricing Section -->
  <section class="py-24 bg-card/30">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <div class="animate-on-scroll opacity-0 translate-y-8 transition-all duration-1000">
        <h2 class="text-4xl md:text-5xl font-serif font-bold text-foreground mb-6">
          –ü—Ä–æ—Å—Ç–æ–µ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
        </h2>
        <p class="text-xl text-muted mb-12">
          –û–¥–∏–Ω –æ—Ç—á–µ—Ç = –æ–¥–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –æ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –±–∏–∑–Ω–µ—Å–∞
        </p>
      </div>
      
      <div class="animate-on-scroll opacity-0 translate-y-8 transition-all duration-1000 delay-300">
        <div class="bg-gradient-to-br from-secondary to-accent p-1 rounded-2xl max-w-md mx-auto">
          <div class="bg-background rounded-xl p-8">
            <div class="text-6xl font-serif font-bold text-foreground mb-2">‚ÇΩ2,990</div>
            <div class="text-muted mb-6">–∑–∞ –æ–¥–∏–Ω –æ—Ç—á–µ—Ç</div>
            
            <ul class="text-left space-y-3 mb-8">
              {#each [
                '–ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ª–æ–∫–∞—Ü–∏–∏',
                '–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ç–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞',
                '–î–∞–Ω–Ω—ã–µ –ø–æ –≤—Å–µ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º',
                '–î–µ–º–æ–≥—Ä–∞—Ñ–∏—è –∏ –¥–æ—Ö–æ–¥—ã —Ä–∞–π–æ–Ω–æ–≤',
                '–¶–µ–Ω—ã –Ω–∞ –∞—Ä–µ–Ω–¥—É –ø–æ —É–ª–∏—Ü–∞–º',
                '–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–æ–≤',
                '–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞ –≤ PDF'
              ] as feature}
                <li class="flex items-center">
                  <svg class="w-5 h-5 text-accent mr-3" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                  </svg>
                  {feature}
                </li>
              {/each}
            </ul>
            
            <div class="text-sm text-muted mb-6">
              üí° –°—Ä–µ–¥–Ω—è—è —ç–∫–æ–Ω–æ–º–∏—è –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –≤—ã–±–æ—Ä–µ –ª–æ–∫–∞—Ü–∏–∏: <strong class="text-foreground">‚ÇΩ500,000+</strong>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- CTA Section -->
  <section class="py-24 bg-gradient-to-r from-primary to-secondary">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <div class="animate-on-scroll opacity-0 translate-y-8 transition-all duration-1000">
        <h2 class="text-4xl md:text-5xl font-serif font-bold text-primary-foreground mb-6">
          –ì–æ—Ç–æ–≤—ã –Ω–∞–π—Ç–∏ –∏–¥–µ–∞–ª—å–Ω—É—é –ª–æ–∫–∞—Ü–∏—é?
        </h2>
        <p class="text-xl text-primary-foreground/80 mb-8">
          –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Å–æ—Ç–Ω—è–º –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–∞—à —Å–µ—Ä–≤–∏—Å
        </p>
        <button 
          onclick={() => heroRef?.scrollIntoView({ behavior: 'smooth' })}
          class="bg-background text-foreground font-semibold py-4 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"
        >
          –ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑ —Å–µ–π—á–∞—Å
        </button>
      </div>
    </div>
  </section>
</div>
